# AiSaga 论文添加工作流程

## 概述

AiSaga现在支持通过AI自动生成论文的三视角内容。你只需要提供论文的基本信息，AI会帮你生成完整的历史视角、范式变迁视角和人的视角内容。

## 工作流程

### 第一步：准备论文信息

编辑 `scripts/add_paper.exs`，填入论文基本信息：

```elixir
paper_info = %{
  title: "论文标题",
  authors: ["作者1", "作者2"],
  year: 2023,
  url: "https://arxiv.org/abs/xxxx.xxxxx",
  abstract: "论文摘要",
  paradigm_id: 5,  # 根据范式选择
  is_paradigm_shift: 1,  # 1表示是范式变迁，0表示不是
  shift_trigger: "范式变迁触发点描述"
}
```

### 第二步：生成AI Prompt

运行脚本生成Prompt：

```bash
mix run scripts/add_paper.exs
```

输出示例：
```
================================================================================
新论文信息
================================================================================
标题: Diffusion Models Beat GANs on Image Synthesis
作者: Prafulla Dhariwal, Alex Nichol
年份: 2021
链接: https://arxiv.org/abs/2105.05233

================================================================================
AI Prompt (复制到ChatGPT/Claude)
================================================================================
请为以下AI论文生成详细的三视角分析内容：

论文标题：Diffusion Models Beat GANs on Image Synthesis
作者：Prafulla Dhariwal, Alex Nichol
发表年份：2021
...

================================================================================
建议的URL标识: dhariwal-2021-diffusion
================================================================================
```

### 第三步：使用AI生成内容

1. 复制生成的Prompt
2. 粘贴到ChatGPT-4、Claude或其他AI助手
3. 等待AI生成完整内容（通常需要30-60秒）

### 第四步：保存AI返回的内容

将AI生成的Markdown内容保存到文件：

```bash
# 创建文件并粘贴AI返回的内容
cat > dhariwal-2021-diffusion.md << 'EOF'
[粘贴AI生成的内容]
EOF
```

AI生成的内容格式示例：
```markdown
## 上一个范式
**上一个范式：GANs + VAEs**

在扩散模型之前，图像生成的主流范式是：
```
GANs（生成对抗网络）+ VAEs（变分自编码器）
```

| 组件 | 贡献 | 问题 |
|------|------|------|
| **GANs** | 生成高质量图像 | 训练不稳定，模式崩溃 |
| **VAEs** | 稳定的训练 | 生成质量较低，模糊 |

**当时的困境**：
- GANs训练困难，需要小心调参
- 无法覆盖所有数据模式
...

## 核心贡献
...
```

### 第五步：插入数据库

运行插入脚本将内容保存到数据库：

```bash
mix run scripts/insert_paper.exs dhariwal-2021-diffusion dhariwal-2021-diffusion.md
```

### 第六步：验证

访问页面查看效果：

```
http://localhost:4000/paper/dhariwal-2021-diffusion
```

## 范式ID对照表

| ID | 范式名称 | 时间范围 |
|----|---------|---------|
| 1 | 感知机与连接主义 | 1957-1969 |
| 2 | 符号AI与专家系统 | 1970-1987 |
| 3 | 统计学习与SVM | 1990-2012 |
| 4 | 深度学习 | 2012-2020 |
| 5 | 基础模型与Transformer | 2017-现在 |

## AI Prompt模板

如果不想使用脚本，可以直接使用以下模板：

```
请为以下AI论文生成详细的三视角分析内容：

论文标题：[论文标题]
作者：[作者列表]
发表年份：[年份]
论文链接：[arXiv链接]
摘要：[摘要]

请按照以下格式生成内容（使用Markdown格式）：

## 上一个范式
描述这篇论文出现之前的主流方法，包括：
- 主流技术栈（用表格对比组件、贡献、问题）
- 当时的困境

## 核心贡献
- 突破性洞察（引用关键句子）
- 2-3个核心创新点
- 一句话总结

## 核心机制
- 核心公式（用代码块）
- 步骤拆解（用表格）
- 关键设计组件

## 为什么赢了
- 与之前方法的对比表格
- 关键优势

## 当时面临的挑战
简洁描述领域面临的核心问题

## 解决方案
简洁描述论文如何解决这些问题

## 深远影响
简洁描述对领域的影响

## 后续影响
- 范式转换表格（时代、核心、代表工作）
- 后续重要工作的时间线

## 作者去向
- 表格列出主要作者的后续发展
- 名言引用（如果有）

## 历史背景
描述论文发表时的时代背景、研究动机

请用中文生成，保持学术性和准确性。
```

## 注意事项

1. **AI质量**：建议使用ChatGPT-4或Claude-3.5-Sonnet以上模型
2. **人工审核**：AI生成的内容可能需要人工审核和微调
3. **学术准确性**：重要事实需要核实，特别是作者去向和后续影响
4. **图片**：AI无法生成图片，如需图片需要手动添加

## 批量添加

如果需要批量添加多篇论文，可以：

1. 创建一个论文列表文件
2. 编写循环脚本自动处理
3. 或者使用AI的批量处理功能

示例批量脚本思路：
```elixir
papers = [
  %{title: "...", authors: [...], ...},
  %{title: "...", authors: [...], ...},
  # ...
]

Enum.each(papers, fn paper ->
  prompt = generate_prompt(paper)
  # 调用AI API生成内容
  # 保存到数据库
end)
```

## 文件结构

```
ai_saga/
├── scripts/
│   ├── add_paper.exs      # 生成AI Prompt
│   └── insert_paper.exs   # 插入数据库
├── priv/repo/
│   └── seeds_all_papers.exs  # 现有的10篇论文数据
└── WORKFLOW.md            # 本文档
```

## 示例

现有的10篇论文都是按照这个流程生成的，可以参考：
- Transformer (2017)
- BERT (2018)
- GPT-3 (2020)
- ...

查看文件 `priv/repo/seeds_all_papers.exs` 了解具体格式。
